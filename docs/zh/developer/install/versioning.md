# Olares 版本说明

Olares 的版本管理和发布流程旨在提供清晰的版本号定义和稳定的升级路径。本文档概述了 Olares 的版本号规则、发布策略、分支管理和升级策略。

## 版本号规则

Olares 版本号基本遵循了 [语义版本号规范](https://semver.org/lang/zh-CN/)：
- 格式为 `主版本号.次版本号.修订号[-预发布版本号]`，例如：`1.11.0-rc.0`。
- 版本顺序如下：
  `1.0.0-alpha < 1.0.0-alpha.1 < 1.0.0-alpha.beta < 1.0.0-beta < 1.0.0-beta.2 < 1.0.0-beta.11 < 1.0.0-rc.1 < 1.0.0`。


## 发布策略

Olares 提供三种类型的版本：**正式版**、**候选（Release Candidate 或 RC）版** 和 **Dailybuild（每日构建）版**。

- **正式版**
  - 经过全面测试后发布，适用于生产环境。
  - 官方安装脚本（`https://olares.sh`）始终默认安装最新稳定版本。
  - **发布节奏**：每月一次  
  - **示例**：`v1.10.5`、`v1.11.0`、`v1.11.1`、`v1.12.0`

- **RC 版**
  - 正式版发布前的测试版。RC 版本一旦通过验证即可升级为正式版。
  - **发布节奏**：根据测试进度  
  - **示例**：`v1.11.0.rc.0`、`v1.11.0.rc.1`

- **Dailybuild 版**
  - 每天凌晨 2 点（北京时间）从 `main` 分支自动生成，适用于开发和测试用途，可能不稳定。
  - **发布节奏**：每天  
  - **示例**：`v1.12.0-20241201`

## 发布分支管理

在 `1.x` 阶段，Olares 遵循结构化的每月发布节奏：

1. 每月月底，从 `main` 分支创建一个发布分支（例如 `release-1.11`）。
2. 从新建的发布分支中发布第一个 RC 版本（例如 `v1.11.0.rc.0`）。随着测试推进，可能会发布更多 RC 版本。
3. `main` 分支切换到下一个版本（例如从 `v1.11` 切换到 `v1.12`）。
4. 稳定版发布后，如果发现问题，会通过补丁版本（例如 `v1.11.1`）在对应的发布分支上解决。

开发者可以根据需要将 PR 提交到 `main` 分支或对应的发布分支。


## 升级策略与兼容性

在 `1.x` 阶段，Olares 处于快速迭代中。**不同次版本号之间不支持自动升级**。升级和兼容性规则如下：

- **同次版本号**：  
  次版本号相同的修订版本（例如从 `1.4.0` 升级到 `1.4.2`）完全兼容，支持自动升级。

- **不同次版本号**：  
  不同次版本号之间（例如从 `1.4.x` 升级到 `1.5.x`）不兼容，需要手动卸载当前版本后再安装新版本。

- **不同版本类型的升级路径**
  - **Dailybuild**：可以升级到较新的 Dailybuild、RC 或正式版。
  - **RC**：可以升级到较新的 RC 或正式版。
  - **正式版**：只能升级到更新的正式版。

::: tip 将来的升级策略
Olares 计划在主版本号超过 `1` 后，全面采用语义版本号规范。这将支持主版本号相同的版本之间无缝自动升级。
:::